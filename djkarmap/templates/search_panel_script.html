<script>
    // Material Select Initialization
    $(document).ready(function () {
        $('.mdb-select').materialSelect();

        var url = 'http://localhost:8000/api/job/'
        var searched_feature;
        $('#btn_search_submit').click(function(){
            $.get(url, function(data){
                displayGeoData(data);                
            })
        });

        function displayGeoData(jobs) {
            // if layer added removed befor add new search
            if (searched_feature){
                map.removeLayer(searched_feature);                
            } 

            

            searched_feature = L.geoJSON(jobs, {
                // be cause api sed data as lat long, and leaflet parse it as long lat for geojson
                // mabe its not best practice
                pointToLayer: function(geoJsonPoint, latlng) {
                    return L.marker([latlng.lng, latlng.lat]);
                }
            }).bindPopup(function (layer){
                return layer.feature.properties.title;
            });
            // if there is no job bound raise error
            map.fitBounds(searched_feature.getBounds());
            map.addLayer(searched_feature);



           
            
        }
    
    });
</script>